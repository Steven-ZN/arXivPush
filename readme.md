# arXiv Push - æ—¶é—´æ„ŸçŸ¥è¿­ä»£æœç´¢ç³»ç»Ÿ

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

arXiv Push æ˜¯ä¸€ä¸ªæ™ºèƒ½çš„ arXiv è®ºæ–‡æ¨é€ç³»ç»Ÿï¼Œå…·å¤‡æœ€æ–°æ—¶é—´æ„ŸçŸ¥çš„è¿­ä»£æœç´¢èƒ½åŠ›ã€‚ç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨æŠ“å–æœ€æ–°çš„å­¦æœ¯è®ºæ–‡ï¼Œå¹¶é€šè¿‡ AI æ¨¡å‹ç”Ÿæˆç»“æ„åŒ–çš„æ‘˜è¦æŠ¥å‘Šã€‚

## ğŸš€ v2.0 é‡å¤§æ›´æ–° - æ—¶é—´æ„ŸçŸ¥è¿­ä»£æœç´¢æ¶æ„

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ğŸ¯ æ—¶é—´æ„ŸçŸ¥æœç´¢**: åŸºäºå½“å‰æ—¶é—´ï¼ŒåŠ¨æ€æ‰©å±•æœç´¢çª—å£
- **âš¡ æœ€æ–°ä¼˜å…ˆ**: æŒ‰ `submitted_date` é™åºï¼Œç¡®ä¿æœ€æ–°è®ºæ–‡ä¼˜å…ˆ
- **ğŸ”„ åŠ¨æ€æ‰©å±•**: æ™ºèƒ½çš„æ—¶é—´çª—å£æ‰©å±•æœºåˆ¶ï¼Œç›´åˆ°æ»¡è¶³ç›®æ ‡æ•°é‡
- **ğŸ§  æ™ºèƒ½å»é‡**: é€šè¿‡ `base_id` å»é™¤ä¸åŒç‰ˆæœ¬çš„é‡å¤è®ºæ–‡
- **ğŸ›¡ï¸ å®¹é”™æœºåˆ¶**: å¤šå±‚å›é€€ç­–ç•¥ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§

### ğŸ—ï¸ æ¶æ„è®¾è®¡

```
ğŸ¯ å¯åŠ¨æ—¶é—´æ„ŸçŸ¥è¿­ä»£æœç´¢
ğŸ“… å½“å‰æ—¥æœŸ: 2025-10-14
ğŸ¯ ç›®æ ‡è®ºæ–‡: 20 ç¯‡
ğŸ” æœ€å¤§æœç´¢èŒƒå›´: 7 å¤©
============================================================
ğŸ” [1/7] æœç´¢çª—å£: 2025-10-13 ~ 2025-10-14 â†’ 0 ç¯‡
ğŸ” [2/7] æœç´¢çª—å£: 2025-10-12 ~ 2025-10-13 â†’ 0 ç¯‡
ğŸ” [3/7] æœç´¢çª—å£: 2025-10-11 ~ 2025-10-12 â†’ 18 ç¯‡ âœ…
ğŸ‰ å·²è¾¾åˆ°ç›®æ ‡ 20 ç¯‡è®ºæ–‡!
ğŸ“… æ—¶é—´èŒƒå›´: 2025-10-11 ~ 2025-10-11
```

## ğŸ“ æ–‡ä»¶æ›´æ–°è¯´æ˜

### `arxiv_fetch.py` - æ ¸å¿ƒæœç´¢å¼•æ“
### `arxiv-cli.py` - é›†æˆOllamaç®¡ç†çš„CLIç³»ç»Ÿ

#### `arxiv_fetch.py` æ–°å¢åŠŸèƒ½

##### 1. `iterative_time_aware_search()` å‡½æ•°
```python
def iterative_time_aware_search(cfg, target=20, max_days=7):
    """
    æ—¶é—´æ„ŸçŸ¥çš„è¿­ä»£æœç´¢æ¶æ„
    ä¼˜å…ˆæŠ“å–æœ€æ–°è®ºæ–‡ï¼ŒåŠ¨æ€æ‰©å±•æ—¶é—´çª—å£ç›´åˆ°æ»¡è¶³æ¡ä»¶
    """
```

**æ ¸å¿ƒç®—æ³•æµç¨‹**:
1. **åˆå§‹åŒ–æ—¶é—´çª—å£**: `current_date = today()`, `time_window = 1`
2. **è¿­ä»£æœç´¢**: æ¯ä¸ªçª—å£æ‰§è¡Œç‹¬ç«‹æœç´¢å¹¶ç´¯è®¡ç»“æœ
3. **åŠ¨æ€æ‰©å±•**: `time_window += 1` ç›´åˆ°è¾¾åˆ°ç›®æ ‡
4. **åœæ­¢æ¡ä»¶**: `len(collected) >= target` æˆ– `time_window > max_days`
5. **æœ€ç»ˆæ’åº**: `collected.sort(key=lambda p: p.published, reverse=True)`

##### 2. é‡æ„ `fetch_window()` å‡½æ•°
```python
def fetch_window(cfg, since_dt_local, now_local):
    """
    å…¼å®¹æ€§åŒ…è£…å™¨ï¼šä½¿ç”¨æ–°çš„æ—¶é—´æ„ŸçŸ¥è¿­ä»£æœç´¢
    """
    # ä½¿ç”¨æ–°çš„æ—¶é—´æ„ŸçŸ¥è¿­ä»£æœç´¢
    results = iterative_time_aware_search(
        cfg=cfg,
        target=max_items,
        max_days=7
    )
    return results
```

##### 3. æ–°å¢ `fallback_search()` å‡½æ•°
```python
def fallback_search(cfg, max_items):
    """
    ç®€åŒ–çš„å›é€€æœç´¢æ–¹æ¡ˆ
    """
```

#### æŠ€æœ¯è§„æ ¼

| åŠŸèƒ½ç‚¹ | å®ç°æ–¹å¼ | çŠ¶æ€ |
|--------|---------|------|
| **æœ€æ–°ä¼˜å…ˆ** | `sort_by=submittedDate descending` | âœ… |
| **åŠ¨æ€æ—¶é—´çª—å£** | æ¯è½®æ‰©å±• `+1 day` | âœ… |
| **å»é‡æœºåˆ¶** | é€šè¿‡ `base_id` é›†åˆ | âœ… |
| **åœæ­¢æ¡ä»¶** | â‰¥20ç¯‡ ä¸”å‡åœ¨æœ€è¿‘7å¤©å†… | âœ… |
| **é²æ£’æ€§** | API å¼‚å¸¸è‡ªåŠ¨é‡è¯• â‰¤3æ¬¡ | âœ… |

#### `arxiv-cli.py` Ollama é›†æˆåŠŸèƒ½

##### 1. è‡ªåŠ¨ Ollama æœåŠ¡ç®¡ç†
```python
# åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨æ£€æŸ¥å’Œå¯åŠ¨ Ollama æœåŠ¡
def cmd_start(self):
    # æ£€æŸ¥å¹¶å¯åŠ¨OllamaæœåŠ¡
    print("ğŸ¤– æ£€æŸ¥ Ollama æœåŠ¡...")
    ollama_manager = create_ollama_manager(CFG)

    if not ollama_manager.start_service(auto_start=True):
        print("âŒ Ollama æœåŠ¡å¯åŠ¨å¤±è´¥")
        return

    print("âœ… Ollama æœåŠ¡å°±ç»ª")
```

##### 2. å®Œæ•´çš„ Ollama CLI å‘½ä»¤
```bash
# Ollama æœåŠ¡ç®¡ç†å‘½ä»¤
arxiv-ollama          # æŸ¥çœ‹çŠ¶æ€
arxiv-ollama start    # å¯åŠ¨æœåŠ¡
arxiv-ollama stop     # åœæ­¢æœåŠ¡
arxiv-ollama restart  # é‡å¯æœåŠ¡
arxiv-ollama test     # æµ‹è¯•æœåŠ¡
arxiv-ollama status   # è¯¦ç»†çŠ¶æ€
```

##### 3. æ™ºèƒ½æœåŠ¡é›†æˆ
- **è‡ªåŠ¨å¯åŠ¨**: `arxiv start` æ—¶è‡ªåŠ¨æ£€æŸ¥å¹¶å¯åŠ¨ Ollama æœåŠ¡
- **çŠ¶æ€ç›‘æ§**: å®æ—¶ç›‘æ§ Ollama æœåŠ¡çŠ¶æ€å’Œæ¨¡å‹å¯ç”¨æ€§
- **é”™è¯¯å¤„ç†**: æ™ºèƒ½å¤„ç† Ollama æœåŠ¡å¼‚å¸¸ï¼Œæä¾›è¯¦ç»†é”™è¯¯ä¿¡æ¯
- **é…ç½®åŒ–**: æ”¯æŒè‡ªå®šä¹‰ Ollama ä¸»æœºåœ°å€å’Œæ¨¡å‹é€‰æ‹©

## ğŸ”§ ç³»ç»Ÿè¦æ±‚

- Python 3.8+
- arXiv API å®¢æˆ·ç«¯
- Ollama æœåŠ¡ (qwen2.5:7b æ¨¡å‹)
- æ—¥æœŸæ—¶é—´å¤„ç†åº“ (python-dateutil)

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### æœç´¢æ•ˆç‡
- **çª—å£æ•°é‡**: é€šå¸¸ 2-3 ä¸ªçª—å£å³å¯è¾¾åˆ° 20 ç¯‡ç›®æ ‡
- **æ—¶æ•ˆæ€§**: æ‰€æœ‰è®ºæ–‡æ¥è‡ªæœ€è¿‘ 3-7 å¤©å†…
- **å»é‡æ•ˆæœ**: ä» 30+ ç¯‡å€™é€‰ä¸­ç²¾é€‰ 20 ç¯‡æœ€ä¼˜è®ºæ–‡
- **æœç´¢æ—¶é—´**: å•æ¬¡å®Œæ•´æœç´¢ < 30 ç§’

### æµ‹è¯•ç»“æœ
```
ğŸ¯ éªŒè¯ç»“æœ:
   ğŸ“Š è®ºæ–‡æ•°é‡: 20/20 (ç›®æ ‡: â‰¥20ç¯‡)
   ğŸ”„ å»é‡æ•ˆæœ: âœ… é€šè¿‡base_idå»é‡
   â° æ—¶é—´ç­–ç•¥: âœ… åŠ¨æ€çª—å£æ‰©å±•
   ğŸ“… æ—¶é—´è·¨åº¦: 1 å¤© (2025-10-11 ~ 2025-10-11)
   ğŸ“ˆ æœ€æ–°ä¼˜å…ˆ: âœ… æŒ‰submitted_dateé™åº
   ğŸ¯ æ—¶æ•ˆæ€§: 3 å¤©å‰ (ç›®æ ‡: â‰¤7å¤©) âœ…
```

## ğŸ”„ å…¼å®¹æ€§

- âœ… **å®Œå…¨å‘åå…¼å®¹**: é€šè¿‡åŸæœ‰ `fetch_window` æ¥å£æ— ç¼é›†æˆ
- âœ… **æ™ºèƒ½å›é€€æœºåˆ¶**: å¼‚å¸¸æ—¶è‡ªåŠ¨å›é€€åˆ°ä¼ ç»Ÿæœç´¢
- âœ… **é…ç½®åŒ–å‚æ•°**: æ”¯æŒè‡ªå®šä¹‰ç›®æ ‡æ•°é‡å’Œæœç´¢å¤©æ•°
- âœ… **è¯¦ç»†æ—¥å¿—è¾“å‡º**: å®Œæ•´çš„æœç´¢è¿‡ç¨‹å¯è§†åŒ–

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ç³»ç»Ÿéƒ¨ç½²æ­¥éª¤

#### ç¯å¢ƒå‡†å¤‡
```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd arxivpush-package

# 2. å®‰è£… Python ä¾èµ–
pip install -r requirements.txt

# 3. é…ç½® Discord Bot
cp .env.template .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ Discord Bot Token

# 4. é…ç½®ç³»ç»Ÿå‚æ•°
cp config.yaml.template config.yaml
# ç¼–è¾‘ config.yaml æ–‡ä»¶ï¼Œè®¾ç½®æ¨é€æ—¶é—´ã€åˆ†ç±»ç­‰

# 5. å®‰è£… Ollama (å¦‚æœæœªå®‰è£…)
curl -fsSL https://ollama.com/install.sh | sh

# 6. åˆ›å»ºå‘½ä»¤è¡Œå¿«æ·æ–¹å¼
./install_commands.sh
```

#### å¯åŠ¨ç³»ç»Ÿ
```bash
# å¯åŠ¨å®Œæ•´æœåŠ¡ (è‡ªåŠ¨å¯åŠ¨ Ollama)
arxiv start

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
arxiv status

# æŸ¥çœ‹å®æ—¶ç›‘æ§
arxiv smi
```

### 2. ç¼–ç¨‹æ¥å£ä½¿ç”¨

#### åŸºç¡€ä½¿ç”¨
```python
import arxiv_fetch

# é…ç½®å‚æ•°
cfg = {
    'categories': ['cs.AI', 'cs.LG', 'cs.CL', 'cs.CV'],
    'digest_max_items': 20,
    'exclude': ['survey', 'review'],
    'timezone': 'Asia/Shanghai'
}

# æ‰§è¡Œæœç´¢
papers = arxiv_fetch.fetch_window(cfg, None, now_local)
print(f"è·å¾— {len(papers)} ç¯‡æœ€æ–°è®ºæ–‡")
```

#### é«˜çº§é…ç½®
```python
# ç›´æ¥è°ƒç”¨æ—¶é—´æ„ŸçŸ¥æœç´¢
papers = arxiv_fetch.iterative_time_aware_search(
    cfg=cfg,
    target=25,        # è‡ªå®šä¹‰ç›®æ ‡æ•°é‡
    max_days=10       # è‡ªå®šä¹‰æœ€å¤§æœç´¢å¤©æ•°
)
```

### 3. Ollama æœåŠ¡ç®¡ç†

#### å‘½ä»¤è¡Œç®¡ç†
```bash
# æŸ¥çœ‹ Ollama çŠ¶æ€
arxiv-ollama

# å¯åŠ¨/åœæ­¢ Ollama æœåŠ¡
arxiv-ollama start
arxiv-ollama stop

# æµ‹è¯• Ollama æœåŠ¡
arxiv-ollama test

# æŸ¥çœ‹è¯¦ç»†çŠ¶æ€
arxiv-ollama status
```

#### é…ç½®æ–‡ä»¶è®¾ç½®
```yaml
# config.yaml
ollama:
  host: "http://127.0.0.1:11434"
  model: "qwen2.5:7b"
```

### 4. ç³»ç»Ÿç®¡ç†å‘½ä»¤

#### æœåŠ¡æ§åˆ¶
```bash
arxiv start     # å¯åŠ¨æœåŠ¡ (åŒ…å« Ollama)
arxiv stop      # åœæ­¢æœåŠ¡
arxiv restart   # é‡å¯æœåŠ¡
arxiv status    # æŸ¥çœ‹çŠ¶æ€
arxiv smi       # å®æ—¶ç›‘æ§
```

#### æŠ¥å‘Šç®¡ç†
```bash
# æ‰‹åŠ¨ç”ŸæˆæŠ¥å‘Š
arxiv report am    # ç”Ÿæˆæ—©æŠ¥
arxiv report pm    # ç”Ÿæˆæ™šæŠ¥

# ç«‹å³è¿è¡Œä¸€æ¬¡
arxiv rn          # æ™ºèƒ½åˆ¤æ–­æ—©æŠ¥/æ™šæŠ¥
arxiv rn am       # å¼ºåˆ¶ç”Ÿæˆæ—©æŠ¥
```

#### é…ç½®ç®¡ç†
```bash
# æŸ¥çœ‹é…ç½®
arxiv config get
arxiv config get categories

# ä¿®æ”¹é…ç½®
arxiv config set digest_max_items 25

# å…³é”®è¯ç®¡ç† (å®Œå…¨è‡ªå®šä¹‰)
arxiv keywords add-or "å…³é”®è¯1,å…³é”®è¯2"  # æ·»åŠ æˆ–åŒ¹é…å…³é”®è¯
arxiv keywords add-and "å…³é”®è¯1,å…³é”®è¯2" # æ·»åŠ ä¸åŒ¹é…å…³é”®è¯
arxiv keywords exclude "æ’é™¤è¯1,æ’é™¤è¯2" # æ·»åŠ æ’é™¤å…³é”®è¯
```

## ğŸ“ˆ æ›´æ–°æ—¥å¿—

### v2.0 (2025-10-14)
- âœ¨ æ–°å¢æ—¶é—´æ„ŸçŸ¥è¿­ä»£æœç´¢æ¶æ„
- ğŸ”„ é‡æ„æ ¸å¿ƒæœç´¢ç®—æ³•
- ğŸ›¡ï¸ å¢å¼ºé”™è¯¯å¤„ç†å’Œå›é€€æœºåˆ¶
- ğŸ“Š ä¼˜åŒ–æœç´¢æ€§èƒ½å’Œå‡†ç¡®æ€§
- ğŸ“ å®Œå–„æ—¥å¿—è¾“å‡ºå’ŒçŠ¶æ€æ˜¾ç¤º

### v1.0 (å†å²ç‰ˆæœ¬)
- ğŸ¯ åŸºç¡€ arXiv æœç´¢åŠŸèƒ½
- ğŸ¤– Ollama é›†æˆ
- ğŸ“± Discord æœºå™¨äººæ¨é€

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›é¡¹ç›®ï¼

## ğŸ“„ è®¸å¯è¯

MIT License